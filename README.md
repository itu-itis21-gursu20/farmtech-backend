# Farmtech - Agriculture Management API

Farmtech is a mobile application designed to enhance the interaction between engineers and farmers in the agricultural sector, increasing productivity without requiring farmers to be physically present on their land. The standout feature of our application is the FarmerGpt Assistant, an AI-powered support system tailored specifically for agriculture. By integrating advanced AI capabilities, our application empowers farmers with the knowledge and tools they need to achieve optimal results and sustainable growth.

## Application Overview

Farmtech divides its features into two primary user groups: Engineers and Farmers. These features are designed to streamline data collection, reporting, and communication, fostering collaboration between farmers and engineers.

### Engineer Features
- Phone Verification: Engineers will use phone verification for secure login.
- Adding Farmers: Engineers can add farmers to the system.
- Multiple Lands: Engineers can add multiple lands for each farmer.
- Pictorial Reports: Pictorial reports can be added to lands for tracking diseases.
- Soil and Leaf Analysis: Analyses can be added to measure the health of the landâ€™s soils and leaves.
- Year-End Reports: Year-end performance reports can be created for each land.
- Map Integration: The lands can be displayed on a map.
- Pesticide Delivery and Return Slips: Delivery and return slips for pesticide delivered to lands can be added.

### Farmer Features
- Viewing Lands: Farmers will be able to view their lands.
- Viewing Pictures: Pictures taken of the lands can be viewed.
- Viewing Reports: Reports related to the lands will be accessible.
- Accessing Analysis Results: Results of soil and leaf analysis will be accessible.
- Viewing Maps: The location of lands on the map can be viewed.
- Year-End Reports: Farmers will be able to review the year-end reports of their lands.
- Purchase and Refund: Farmers can track and approve purchase and refund receipts entered by the engineer for pesticides.
- FarmerGpt Assistant: With AI support customized for agriculture, farmers can get 24/7 support about their lands, crops, and pesticides. The assistant can detect diseases in crops via image analysis and provide guidance on increasing field yield.

## Project Structure

The backend of the project is structured in a modular fashion using Node.js, with controllers, routes, entities, and database interactions clearly separated. The backend uses MongoDB as the primary database. Additionally, the GPT-4o model is used to integrate the FarmerGpt Assistant into the system.


## Routes

Below are the main endpoints of the API:

- /api/engineers: CRUD operations for engineers.
- /api/farmers: CRUD operations for farmers.
- /api/leafAnalysis: Leaf analysis-related operations.
- /api/soilAnalysis: Soil analysis-related operations.
- /api/purchase: Purchase-related operations.
- /api/report: Generate various reports including end-of-year reports.
- /api/refund: Handle refunds related to purchases.
- /api/sharedLand: Manage shared land data.
- /api/gpt: For GPT-based operations, including the FarmerGpt Assistant.

## Controllers

The controllers define the business logic for each operation. Each controller maps to a specific entity and handles the corresponding route requests.

## Entities

The entities represent the data models used in the system. Some of the main entities include:

- Engineer: Represents engineers involved in agricultural operations.
- Farmer: Represents farmers and their related data.
- LeafAnalysis: Stores information about leaf analysis reports.
- SoilAnalysis: Stores information about soil analysis reports.
- Purchase: Represents purchase data.
- Report: Handles various reports generated by the system.
- Refund: Manages refund operations.
- SharedLand: Represents data related to shared land operations.

## Repositories

The repositories abstract the database layer and interact with MongoDB collections for each entity. They handle CRUD operations for the respective models.

## Database Configuration

The application uses MongoDB for storing data. Each entity has a corresponding repository in the infrastructure/database directory.

Example of connecting to MongoDB can be found in ExpressServer.js.

## Getting Started

### Prerequisites
- Node.js (v16.x or higher)
- MongoDB

### Installation
- Clone the repository:
```console
git clone https://github.com/itu-itis21-gursu20/farmtech-backend.git
```
- Navigate to the project directory:
```console
cd api
```

- Install Node.js Dependencies:
The following dependencies are required for the project and will be automatically installed when running npm install:
  
    - express: Web framework for Node.js, used for building APIs.
    - mongoose: ODM (Object Data Modeling) library for MongoDB and Node.js, used for database operations.
    - jsonwebtoken: Library used to generate and verify JSON Web Tokens (JWT) for user authentication and authorization.
    - dotenv: Used to load environment variables from a .env file into process.env.
    - cors: Middleware for enabling CORS (Cross-Origin Resource Sharing) in the Express application, allowing communication between different domains.
    - crypto-js: Library for performing cryptographic operations such as encryption and decryption.
    - nodemon: A development tool that automatically restarts the Node.js server when file changes are detected.
```console
npm install
```
- Create a .env file for environment variables (MongoDB URI, GPT API key, etc.).
 
- Run the project:
```console
npm start
```


